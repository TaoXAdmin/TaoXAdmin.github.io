---
// src/components/ServiceCard.astro
/** @typedef {{ title: string; description: string; bullets: string[]; icon?: string; href?: string; ctaLabel?: string }} Props */
const { title, description, bullets = [], icon = '', href = '', ctaLabel = '' } = Astro.props;

/** Normalise un chemin d’asset :
 *  - http(s) => inchangé
 *  - commence par '/' => on préfixe avec BASE_URL si besoin
 *  - relatif => on préfixe avec BASE_URL
 */
const BASE = import.meta.env.BASE_URL ?? '/';
const iconSrc = icon
  ? (icon.startsWith('http')
      ? icon
      : `${BASE}${icon.replace(/^\//, '')}`)
  : '';

---

<article class="group rounded-2xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-5 shadow-sm hover:shadow-md transition-shadow">
  <header class="flex items-start gap-3 mb-4">
    {icon && (
      <div class="shrink-0 h-10 w-10 rounded-xl bg-blue-50 dark:bg-blue-950/30 ring-1 ring-blue-100 dark:ring-blue-900 grid place-items-center">
        <img
          src={iconSrc}
          alt=""
          width="36"
          height="36"
          loading="lazy"
          class="h-6 w-6"
          aria-hidden="true"
        />
      </div>
    )}
    <div>
      <h3 class="text-lg font-semibold text-neutral-900 dark:text-neutral-100">{title}</h3>
      <p class="text-sm text-neutral-700 dark:text-neutral-300">{description}</p>
    </div>
  </header>

  {bullets?.length > 0 && (
    <ul class="mt-3 space-y-2 text-sm text-neutral-700 dark:text-neutral-300">
      {bullets.map((item) => (
        <li class="flex items-start gap-2">
          <span class="mt-1 inline-block h-1.5 w-1.5 rounded-full bg-blue-500"></span>
          <span>{item}</span>
        </li>
      ))}
    </ul>
  )}

  {href && (
    <p class="mt-5">
      <a
        href={href}
        class="inline-flex items-center gap-2 rounded-xl px-3 py-2 bg-blue-600 text-white hover:bg-blue-700"
      >
        {ctaLabel || 'En savoir plus'}
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M7 17l10-10M17 7H9M17 7v8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </a>
    </p>
  )}
</article>
