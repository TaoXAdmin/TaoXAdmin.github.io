---
// src/components/ServiceCard.astro
/** @typedef {{ title: string; description: string; bullets: string[]; icon?: string; href?: string; ctaLabel?: string; ctaVariant?: 'solid'|'outlineGold' }} Props */
const { title, description, bullets = [], icon = '', href = '', ctaLabel = '', ctaVariant = 'solid' } = Astro.props;

const BASE = import.meta.env.BASE_URL ?? '/';
const iconSrc = icon ? (icon.startsWith('http') ? icon : `${BASE}${icon.replace(/^\//, '')}`) : '';

const ctaBase = 'inline-flex items-center gap-2 rounded-xl px-3 py-2 transition-colors focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40';
const ctaClasses = ctaVariant === 'outlineGold'
  ? `${ctaBase} border border-[#D6B36A80] text-white bg-transparent hover:bg-[#D6B36A14] active:bg-[#D6B36A20]`
  : `${ctaBase} bg-white text-black hover:bg-white/90 active:bg-white/80`;
---

<article class="group rounded-2xl border border-white/10 bg-neutral-950 p-5 shadow-lg shadow-black/20 hover:shadow-black/30 transition-shadow">
  <header class="flex items-start gap-3 mb-4">
    {icon && (
      <div class="shrink-0 h-10 w-10 rounded-xl bg-white/5 ring-1 ring-white/10 grid place-items-center">
        <img src={iconSrc} alt="" width="36" height="36" loading="lazy" class="h-6 w-6" aria-hidden="true" />
      </div>
    )}
    <div>
      <h3 class="text-lg font-semibold text-white tracking-tight">{title}</h3>
      <p class="text-sm text-white/70">{description}</p>
    </div>
  </header>

  {bullets?.length > 0 && (
    <ul class="mt-3 space-y-2 text-sm text-white/70">
      {bullets.map((item) => (
        <li class="flex items-start gap-2">
          <span class="mt-1 inline-block h-1.5 w-1.5 rounded-full bg-white/50"></span>
          <span>{item}</span>
        </li>
      ))}
    </ul>
  )}

  {href && (
    <p class="mt-5">
      <a href={href} class={ctaClasses}>
        {ctaLabel || 'En savoir plus'}
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M7 17l10-10M17 7H9M17 7v8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </a>
    </p>
  )}
</article>
