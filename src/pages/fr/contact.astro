---
import BaseLayout from '../../layouts/BaseLayout.astro';

const lang = 'fr';
const pageTitle = 'Contact - Alexis Fiska';
const pageDescription =
  'Prenez contact avec Alexis Fiska pour discuter de vos besoins en automatisation de tests, CI/CD, performance ou GenAI.';

const formAction = 'https://formspree.io/f/mqadgabk';
const privacyPath = `/${lang}/privacy`;
---
<BaseLayout lang={lang} title={pageTitle} description={pageDescription}>
  <section class="max-w-3xl mx-auto text-center my-8">
    <h1 class="text-3xl font-bold mb-2">Contact</h1>
    <p class="text-neutral-700 dark:text-neutral-300">
      Discutons de votre projet. <strong>Audit express</strong>, <strong>devis</strong> ou simple question :
      je réponds sous 1–2 jours ouvrés.
    </p>
  </section>

  <!-- barre d’ancres pour tes CTA -->
  <nav class="max-w-3xl mx-auto mb-5 flex items-center justify-center gap-2 text-sm">
    <a href="#audit" class="px-3 py-1.5 rounded-full border border-blue-200 dark:border-blue-900 text-blue-700 dark:text-blue-300 bg-blue-50/70 dark:bg-blue-950/30">Audit 30 min</a>
    <a href="#quote" class="px-3 py-1.5 rounded-full border border-neutral-200 dark:border-neutral-800 text-neutral-700 dark:text-neutral-300">Demander un devis</a>
  </nav>

  <form
    id="contact"
    action={formAction}
    method="POST"
    class="max-w-3xl mx-auto bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-2xl shadow-sm p-6 md:p-7 space-y-5"
  >
    <!-- meta / anti-spam -->
    <input type="hidden" name="lang" value={lang} />
    <input type="text" name="_gotcha" class="hidden" tabindex="-1" autocomplete="off" />
    <input type="hidden" name="_subject" value="Contact depuis le site — alexis-fiska" />

    <!-- objet -->
    <div id="audit" class="scroll-mt-24"></div>
    <div id="quote" class="scroll-mt-24"></div>
    <fieldset class="grid sm:grid-cols-3 gap-2" aria-label="Objet du contact">
      <label class="flex items-center gap-2 rounded-lg border border-neutral-200 dark:border-neutral-800 px-3 py-2">
        <input type="radio" name="topic" value="Audit" checked />
        <span>Audit 30 min</span>
      </label>
      <label class="flex items-center gap-2 rounded-lg border border-neutral-200 dark:border-neutral-800 px-3 py-2">
        <input type="radio" name="topic" value="Devis" />
        <span>Devis</span>
      </label>
      <label class="flex items-center gap-2 rounded-lg border border-neutral-200 dark:border-neutral-800 px-3 py-2">
        <input type="radio" name="topic" value="Autre" />
        <span>Autre</span>
      </label>
    </fieldset>

    <!-- identité -->
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label for="name" class="block text-sm font-medium mb-1">Nom *</label>
        <div class="flex items-center gap-2 rounded-md border border-neutral-300 dark:border-neutral-700 px-3">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm-9 9a9 9 0 1 1 18 0" stroke="currentColor" stroke-width="2" fill="none"/></svg>
          <input id="name" name="name" required type="text" class="w-full py-2 bg-transparent outline-none" />
        </div>
      </div>
      <div>
        <label for="email" class="block text-sm font-medium mb-1">Email *</label>
        <div class="flex items-center gap-2 rounded-md border border-neutral-300 dark:border-neutral-700 px-3">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 6h18v12H3zM3 6l9 7 9-7" stroke="currentColor" stroke-width="2" fill="none"/></svg>
          <input id="email" name="email" required type="email" class="w-full py-2 bg-transparent outline-none" />
        </div>
      </div>
    </div>

    <div>
      <label for="company" class="block text-sm font-medium mb-1">Société</label>
      <div class="flex items-center gap-2 rounded-md border border-neutral-300 dark:border-neutral-700 px-3">
        <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 21V5l9-3 9 3v16H3zm9-10v10" stroke="currentColor" stroke-width="2" fill="none"/></svg>
        <input id="company" name="company" type="text" class="w-full py-2 bg-transparent outline-none" />
      </div>
    </div>

    <!-- budget + message -->
    <div class="grid md:grid-cols-2 gap-4">
      <div>
        <label for="budget" class="block text-sm font-medium mb-1">Budget (optionnel)</label>
        <select id="budget" name="budget" class="w-full rounded-md border border-neutral-300 dark:border-neutral-700 px-3 py-2 bg-white dark:bg-neutral-900">
          <option value="">—</option>
          <option>&lt; 5 k€</option>
          <option>5–15 k€</option>
          <option>15–50 k€</option>
          <option>&gt; 50 k€</option>
        </select>
      </div>
      <div>
        <label for="timeline" class="block text-sm font-medium mb-1">Délai souhaité</label>
        <select id="timeline" name="timeline" class="w-full rounded-md border border-neutral-300 dark:border-neutral-700 px-3 py-2 bg-white dark:bg-neutral-900">
          <option value="">Flexible</option>
          <option>Asap (≤ 2 semaines)</option>
          <option>Ce trimestre</option>
          <option>Plus tard</option>
        </select>
      </div>
    </div>

    <div>
      <label for="message" class="block text-sm font-medium mb-1">Message *</label>
      <textarea id="message" name="message" required rows="6"
        class="w-full rounded-md border border-neutral-300 dark:border-neutral-700 px-3 py-2 bg-white dark:bg-neutral-900"></textarea>
    </div>

    <div class="flex items-start gap-2">
      <input id="consent" name="consent" type="checkbox" required class="mt-1" />
      <label for="consent" class="text-sm text-neutral-700 dark:text-neutral-300">
        J’accepte l’utilisation de mes informations pour être recontacté. Voir la
        <a href={privacyPath} class="underline text-blue-600 dark:text-blue-400">politique de confidentialité</a>.
      </label>
    </div>

    <button type="submit"
      class="w-full md:w-auto bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 transition-colors">
      Envoyer
    </button>
  </form>

  <div class="max-w-3xl mx-auto text-center text-neutral-700 dark:text-neutral-300 space-y-2 mt-6">
    <p>
      Préférez-vous un autre canal ? Écrivez-moi à
      <a href="mailto:alexissfiska@gmail.com" class="underline text-blue-600 dark:text-blue-400">alexissfiska@gmail.com</a>
      ou sur
      <a href="https://www.linkedin.com/in/alexis-fiska" target="_blank" rel="noopener" class="underline text-blue-600 dark:text-blue-400">LinkedIn</a>.
    </p>
  </div>
</BaseLayout>
