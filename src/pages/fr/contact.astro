---
import BaseLayout from '../../layouts/BaseLayout.astro';

const lang = 'fr';
const pageTitle = 'Contact - Alexis Fiska';
const pageDescription =
  'Prenez contact avec Alexis Fiska pour discuter de vos besoins en automatisation de tests, CI/CD, performance ou GenAI.';

const formAction = 'https://formspree.io/f/mqadgabk';
const privacyPath = `/${lang}/privacy`;
---
<BaseLayout lang={lang} title={pageTitle} description={pageDescription}>
  <section class="max-w-3xl mx-auto text-center my-8">
    <h1 class="text-3xl font-bold mb-2 text-white">
      <span class="bg-clip-text text-transparent bg-gradient-to-r from-white to-[#D6B36A]">Contact</span>
    </h1>
    <p class="text-white/70">
      Discutons de votre projet. <strong>Audit express</strong>, <strong>devis</strong> ou simple question :
      je réponds sous 1–2 jours ouvrés.
    </p>
  </section>

  <!-- barre d’ancres -->
  <nav class="max-w-3xl mx-auto mb-6 flex items-center justify-center gap-2 text-sm">
    <a href="#audit"
       class="px-3 py-1.5 rounded-full border border-[#D6B36A80] text-white bg-transparent hover:bg-[#D6B36A14]">
      Audit 30 min
    </a>
    <a href="#quote"
       class="px-3 py-1.5 rounded-full border border-[#D6B36A80] text-white/90 hover:bg-[#D6B36A14]">
      Demander un devis
    </a>
  </nav>

  <!-- wrapper -> bordure dégradée dorée -->
  <div class="max-w-3xl mx-auto rounded-2xl p-[1px]
              ">
    <form
      id="contact"
      action={formAction}
      method="POST"
      class="relative rounded-2xl bg-neutral-950 border border-white/10 shadow-xl shadow-black/30
             p-6 md:p-8 space-y-6 text-white overflow-hidden"
    >
      <!-- voile luxe -->
      <div aria-hidden="true" class="pointer-events-none absolute inset-0
           [background:radial-gradient(80%_120%_at_50%_-20%,rgba(255,255,255,.06),transparent_70%),linear-gradient(120deg,transparent,rgba(214,179,106,.08),transparent)]"></div>

      <!-- meta / anti-spam -->
      <input type="hidden" name="lang" value={lang} />
      <input type="text" name="_gotcha" class="hidden" tabindex="-1" autocomplete="off" />
      <input type="hidden" name="_subject" value="Contact depuis le site — alexis-fiska" />

      <!-- objet (radios custom, sans rond) -->
      <div id="audit" class="scroll-mt-24"></div>
      <div id="quote" class="scroll-mt-24"></div>
      <fieldset class="relative grid sm:grid-cols-3 gap-2" aria-label="Objet du contact">
        <label class="relative flex items-center gap-3 rounded-xl border border-white/15 bg-white/[.02]
                       px-3 py-2 hover:bg-white/5 transition focus-within:ring-2 focus-within:ring-white/30">
          <input type="radio" name="topic" value="Audit" checked class="peer sr-only" />
          <span class="text-white/80 peer-checked:text-white">Audit 30 min</span>
          <svg class="ml-auto hidden peer-checked:block text-[#D6B36A]" width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M20 6L9 17l-5-5" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="pointer-events-none absolute inset-0 rounded-xl
                       peer-checked:border-[#D6B36A80] peer-checked:shadow-[inset_0_0_0_1px_rgba(214,179,106,.35)]"></span>
        </label>

        <label class="relative flex items-center gap-3 rounded-xl border border-white/15 bg-white/[.02]
                       px-3 py-2 hover:bg-white/5 transition focus-within:ring-2 focus-within:ring-white/30">
          <input type="radio" name="topic" value="Devis" class="peer sr-only" />
          <span class="text-white/80 peer-checked:text-white">Devis</span>
          <svg class="ml-auto hidden peer-checked:block text-[#D6B36A]" width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M20 6L9 17l-5-5" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="pointer-events-none absolute inset-0 rounded-xl
                       peer-checked:border-[#D6B36A80] peer-checked:shadow-[inset_0_0_0_1px_rgba(214,179,106,.35)]"></span>
        </label>

        <label class="relative flex items-center gap-3 rounded-xl border border-white/15 bg-white/[.02]
                       px-3 py-2 hover:bg-white/5 transition focus-within:ring-2 focus-within:ring-white/30">
          <input type="radio" name="topic" value="Autre" class="peer sr-only" />
          <span class="text-white/80 peer-checked:text-white">Autre</span>
          <svg class="ml-auto hidden peer-checked:block text-[#D6B36A]" width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M20 6L9 17l-5-5" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="pointer-events-none absolute inset-0 rounded-xl
                       peer-checked:border-[#D6B36A80] peer-checked:shadow-[inset_0_0_0_1px_rgba(214,179,106,.35)]"></span>
        </label>
      </fieldset>

      <!-- identité -->
      <div class="grid md:grid-cols-2 gap-5">
        <div>
          <label for="name" class="block text-sm font-medium mb-1 text-white">Nom *</label>
          <div class="flex items-center gap-2 rounded-lg border border-white/15 bg-white/[.02] px-3
                      focus-within:ring-2 focus-within:ring-white/30">
            <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" class="shrink-0 text-white/70">
              <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm-9 9a9 9 0 1 1 18 0" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
            <input id="name" name="name" required type="text" autocomplete="name"
              class="w-full py-2 bg-transparent text-white placeholder-white/50 outline-none" />
          </div>
        </div>
        <div>
          <label for="email" class="block text-sm font-medium mb-1 text-white">Email *</label>
          <div class="flex items-center gap-2 rounded-lg border border-white/15 bg-white/[.02] px-3
                      focus-within:ring-2 focus-within:ring-white/30">
            <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" class="shrink-0 text-white/70">
              <path d="M3 6h18v12H3zM3 6l9 7 9-7" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
            <input id="email" name="email" required type="email" autocomplete="email" inputmode="email"
              class="w-full py-2 bg-transparent text-white placeholder-white/50 outline-none" />
          </div>
        </div>
      </div>

      <div>
        <label for="company" class="block text-sm font-medium mb-1 text-white">Société</label>
        <div class="flex items-center gap-2 rounded-lg border border-white/15 bg-white/[.02] px-3
                    focus-within:ring-2 focus-within:ring-white/30">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" class="shrink-0 text-white/70">
            <path d="M3 21V5l9-3 9 3v16H3zm9-10v10" stroke="currentColor" stroke-width="2" fill="none"/>
          </svg>
          <input id="company" name="company" type="text" autocomplete="organization"
            class="w-full py-2 bg-transparent text-white placeholder-white/50 outline-none" />
        </div>
      </div>

      <!-- budget + message -->
      <div class="grid md:grid-cols-2 gap-5">
        <div>
          <label for="budget" class="block text-sm font-medium mb-1 text-white">Budget (optionnel)</label>
          <div class="relative group">
            <select id="budget" name="budget"
              class="w-full rounded-lg border border-white/15 bg-white/[.02] px-3 py-2 pr-10
                     text-white appearance-none outline-none focus:ring-2 focus:ring-white/30">
              <option value="">—</option>
              <option>&lt; 5 k€</option>
              <option>5–15 k€</option>
              <option>15–50 k€</option>
              <option>&gt; 50 k€</option>
            </select>
            <!-- chevron -->
            <svg class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-white/70 group-focus-within:text-white"
                 width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>

        <div>
          <label for="timeline" class="block text-sm font-medium mb-1 text-white">Délai souhaité</label>
          <div class="relative group">
            <select id="timeline" name="timeline"
              class="w-full rounded-lg border border-white/15 bg-white/[.02] px-3 py-2 pr-10
                     text-white appearance-none outline-none focus:ring-2 focus:ring-white/30">
              <option value="">Flexible</option>
              <option>Asap (≤ 2 semaines)</option>
              <option>Ce trimestre</option>
              <option>Plus tard</option>
            </select>
            <svg class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-white/70 group-focus-within:text-white"
                 width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
        </div>
      </div>

      <div>
        <label for="message" class="block text-sm font-medium mb-1 text-white">Message *</label>
        <textarea id="message" name="message" required rows="6"
          class="w-full rounded-lg border border-white/15 bg-white/[.02] text-white px-3 py-2
                 placeholder-white/50 outline-none focus:ring-2 focus:ring-white/30"></textarea>
      </div>

      <!-- consent -->
      <div class="flex items-start gap-3">
        <input id="consent" name="consent" type="checkbox" required
               class="accent-[#D6B36A] mt-1 h-4 w-4" />
        <label for="consent" class="text-sm text-white/80">
          J’accepte l’utilisation de mes informations pour être recontacté. Voir la
          <a href={privacyPath} class="underline underline-offset-4 text-white hover:text-white/90">politique de confidentialité</a>.
        </label>
      </div>

      <!-- CTA -->
      <div class="pt-2">
        <button type="submit"
          class="inline-flex items-center gap-2 rounded-xl font-medium px-6 py-3
                 border border-[#D6B36A80] text-white bg-transparent
                 hover:bg-[#D6B36A14] active:bg-[#D6B36A20]
                 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/40 transition-colors">
          Envoyer
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M7 17l10-10M17 7H9M17 7v8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <!-- fix cross-browser du menu déroulant -->
      <style is:inline>
        /* lisibilité du menu natif (Chrome/Safari/Firefox/Windows) */
        #contact select option { color:#111; background:#fff; }
        /* Edge/IE legacy */
        #contact select::-ms-expand { display:none; }
      </style>
    </form>
  </div>

  <div class="max-w-3xl mx-auto text-center text-white/70 space-y-2 mt-6">
    <p>
      Préférez-vous un autre canal ? Écrivez-moi à
      <a href="mailto:alexissfiska@gmail.com" class="underline underline-offset-4 text-white hover:text-white/90">alexissfiska@gmail.com</a>
      ou sur
      <a href="https://www.linkedin.com/in/alexis-fiska" target="_blank" rel="noopener" class="underline underline-offset-4 text-white hover:text-white/90">LinkedIn</a>.
    </p>
  </div>
</BaseLayout>
