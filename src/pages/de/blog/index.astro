---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const lang = 'de';
const BASE = import.meta.env.BASE_URL ?? '/';

const posts = await getCollection('blog', (entry) => entry.slug.endsWith('.de') && !entry.data.draft);
posts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());

const pageTitle = 'Blog - Alexis Fiska';
const pageDescription = 'Technische Artikel und Erfahrungsberichte.';
---
<BaseLayout lang={lang} title={pageTitle} description={pageDescription}>
  <h1 class="text-3xl font-bold mb-6 text-center">Blog</h1>
  {posts.length === 0 ? (
    <p class="text-center text-neutral-600 dark:text-neutral-300">Beiträge folgen in Kürze.</p>
  ) : (
    <ul class="max-w-3xl mx-auto space-y-4">
      {posts.map((post) => (
        <li class="rounded-lg border border-neutral-200 dark:border-neutral-700 p-4 hover:bg-neutral-50 dark:hover:bg-neutral-800 transition">
          <a
            href={`${BASE}${lang}/blog/${post.slug.replace(/\.(fr|en|de|pt)$/, '')}`}
            class="text-lg font-semibold text-blue-600 dark:text-blue-400 hover:underline"
          >
            {post.data.title}
          </a>
          <p class="text-sm text-neutral-600 dark:text-neutral-300 mt-1">{post.data.description}</p>
        </li>
      ))}
    </ul>
  )}
</BaseLayout>
